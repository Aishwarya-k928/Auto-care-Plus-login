<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AutoCare Plus | Submit Order</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===============================
   BASE + WALLPAPER
================================ */
html,body{height:100%}
body{
  margin:0;
  font-family:"Inter","Segoe UI",sans-serif;
  color:#fff;
  background:url("./bmw-wallpaper.jpg") center/cover no-repeat fixed;
  overflow:hidden;
}

/* Dark cinematic overlay */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:linear-gradient(
    180deg,
    rgba(2,6,23,.55),
    rgba(2,6,23,.75)
  );
  z-index:-1;
}

/* Headlight reflection sweep */
body::after{
  content:"";
  position:fixed;
  inset:-40%;
  background:linear-gradient(
    115deg,
    transparent 38%,
    rgba(255,255,255,.12) 46%,
    rgba(255,255,255,.35) 50%,
    rgba(255,255,255,.12) 54%,
    transparent 62%
  );
  transform:translateX(-120%);
  animation:headlightSweep 6s linear infinite;
  mix-blend-mode:screen;
  z-index:-1;
}
@keyframes headlightSweep{
  0%{transform:translateX(-120%)}
  50%,100%{transform:translateX(120%)}
}

/* ===============================
   RACING BACKGROUND
================================ */
.race-bg{position:fixed;inset:0;z-index:0;pointer-events:none}
.road{
  position:absolute;
  bottom:0;
  width:300%;
  height:42%;
  background:repeating-linear-gradient(
    90deg,#111 0,#111 60px,#eee 60px,#eee 120px);
  opacity:.25;
}
.car{position:absolute;bottom:18%;font-size:64px;filter:drop-shadow(0 12px 30px #000)}
.car1{bottom:20%}
.car2{bottom:26%;font-size:56px}
.car3{bottom:14%;font-size:60px}

/* ===============================
   UI CONTAINER
================================ */
.ui-wrap{
  position:relative;
  z-index:2;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Glass card */
.card{
  width:440px;
  padding:36px 34px 40px;
  border-radius:22px;
  background:rgba(15,23,42,.88);
  backdrop-filter:blur(10px);
  box-shadow:
    0 40px 90px rgba(0,0,0,.7),
    inset 0 1px 0 rgba(255,255,255,.08);
}

/* Brand */
.brand{
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:8px;
}
.brand-logo{
  font-size:32px;
}
.brand-title{
  font-size:22px;
  font-weight:700;
  letter-spacing:.3px;
}

/* Subtitle */
.subtitle{
  color:#94a3b8;
  font-size:14px;
  margin-bottom:26px;
}

/* Inputs */
.field{
  position:relative;
  margin-bottom:16px;
}
.field span{
  position:absolute;
  left:14px;
  top:50%;
  transform:translateY(-50%);
  opacity:.6;
}
input,select{
  width:100%;
  padding:14px 14px 14px 42px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(2,6,23,.9);
  color:#fff;
  font-size:15px;
  outline:none;
  transition:.25s;
}
input:focus,select:focus{
  border-color:#22c55e;
  box-shadow:0 0 0 3px rgba(34,197,94,.15);
}

/* CTA Button */
button{
  width:100%;
  margin-top:12px;
  padding:15px;
  border-radius:14px;
  border:none;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  color:#052e16;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:.25s;
}
button:hover{transform:translateY(-1px);box-shadow:0 10px 30px rgba(34,197,94,.35)}
button:active{transform:translateY(0)}

/* Footer info */
.meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:16px;
  font-size:12px;
  color:#94a3b8;
}

/* Popup */
.popup{
  position:fixed;
  top:28px;right:28px;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  color:#052e16;
  padding:14px 22px;
  border-radius:14px;
  font-weight:700;
  display:none;
  z-index:3;
}
</style>
</head>

<body>

<!-- Racing animation -->
<div class="race-bg">
  <div class="road"></div>
  <div class="car car1">üèéÔ∏è</div>
  <div class="car car2">üöó</div>
  <div class="car car3">üöô</div>
</div>

<div class="ui-wrap">
  <div class="card">
    <div class="brand">
      <div class="brand-logo">üöò</div>
      <div class="brand-title">AutoCare Plus</div>
    </div>
    <div class="subtitle">Smart vehicle service orchestration</div>

    <div class="field">
      <span>üî¢</span>
      <input id="vehicle" placeholder="Vehicle Registration Number">
    </div>

    <div class="field">
      <span>üë§</span>
      <input id="customer" placeholder="Customer Name">
    </div>

    <div class="field">
      <span>üõ†Ô∏è</span>
      <select id="service">
        <option>General Service</option>
        <option>Repair</option>
        <option>Diagnostics</option>
      </select>
    </div>

    <button id="submit">Submit Service Order</button>

    <div class="meta">
      <span>Live system ‚Ä¢ Real-time sync</span>
      <span id="time"></span>
    </div>
  </div>
</div>

<div class="popup" id="popup">‚úÖ Order Submitted Successfully</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp }
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const app = initializeApp({
  apiKey: "AIzaSyD9cPmUCMEtT7XukcAxmeS50jKh1A2f31Q",
  authDomain: "auto-care-plus-e7fdf.firebaseapp.com",
  projectId: "auto-care-plus-e7fdf",
  storageBucket: "auto-care-plus-e7fdf.firebasestorage.app",
  messagingSenderId: "746107164946",
  appId: "1:746107164946:web:5951433bf11f0cadedfbcb"
});
const db = getFirestore(app);

time.innerText = new Date().toLocaleString();

submit.onclick = async()=>{
  await addDoc(collection(db,"jobs"),{
    vehicleNumber:vehicle.value,
    customerName:customer.value,
    serviceType:service.value,
    status:"NEW",
    createdAt:serverTimestamp()
  });
  popup.style.display="block";
  setTimeout(()=>popup.style.display="none",2400);
};

/* Speed animation */
let speed=12;
const cars=document.querySelectorAll(".car");
const road=document.querySelector(".road");

const style=document.createElement("style");
style.innerHTML=`
@keyframes drive{
  0%{transform:translateX(-20vw)}
  50%{transform:translateX(120vw)}
  100%{transform:translateX(-20vw)}
}
@keyframes roadMove{to{transform:translateX(-50%)}}
`;
document.head.appendChild(style);

function applySpeed(){
  cars.forEach((c,i)=>c.style.animation=`drive ${speed+i*2}s linear infinite`);
  road.style.animation=`roadMove ${speed/4}s linear infinite`;
}
applySpeed();

onSnapshot(collection(db,"jobs"),snap=>{
  let load=0;
  snap.forEach(d=>{
    if(["REPAIR","QUALITY_CHECK"].includes(d.data().status)) load++;
  });
  speed=Math.max(6,16-load);
  applySpeed();
});
</script>

</body>
</html>
